<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a writable connection to a file in an archive. — archive_write • archive</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a writable connection to a file in an archive. — archive_write" />
<meta property="og:description" content="Create a writable connection to a file in an archive." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">archive</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/archive/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a writable connection to a file in an archive.</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/archive/blob/master/R/archive_write.R'><code>R/archive_write.R</code></a></small>
    <div class="hidden name"><code>archive_write.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a writable connection to a file in an archive.</p>
    </div>

    <pre class="usage"><span class='fu'>archive_write</span><span class='op'>(</span>
  <span class='va'>archive</span>,
  <span class='va'>file</span>,
  mode <span class='op'>=</span> <span class='st'>"w"</span>,
  format <span class='op'>=</span> <span class='cn'>NULL</span>,
  filter <span class='op'>=</span> <span class='cn'>NULL</span>,
  options <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>character</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>archive</th>
      <td><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> The archive filename or an <code>archive</code> object.</p></td>
    </tr>
    <tr>
      <th>file</th>
      <td><p><code>character(1) || integer(1)</code> The filename within the archive,
specified either by filename or by position.</p></td>
    </tr>
    <tr>
      <th>mode</th>
      <td><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> A description of how to open the
connection (if it should be opened initially).  See section
‘Modes’ in <code><a href='https://rdrr.io/r/base/connections.html'>base::connections()</a></code> for possible values.</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> default: <code>NULL</code> The archive format, one of &#8216;7zip&#8217;, &#8216;cab&#8217;, &#8216;cpio&#8217;, &#8216;iso9660&#8217;, &#8216;lha&#8217;, &#8216;mtree&#8217;, &#8216;shar&#8217;, &#8216;rar&#8217;, &#8216;raw&#8217;, &#8216;tar&#8217;, &#8216;xar&#8217;, &#8216;zip&#8217;, &#8216;warc&#8217;
.</p></td>
    </tr>
    <tr>
      <th>filter</th>
      <td><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> default: <code>NULL</code> The archive filter, one of &#8216;none&#8217;, &#8216;gzip&#8217;, &#8216;bzip2&#8217;, &#8216;compress&#8217;, &#8216;lzma&#8217;, &#8216;xz&#8217;, &#8216;uuencode&#8217;, &#8216;lzip&#8217;, &#8216;lrzip&#8217;, &#8216;lzop&#8217;, &#8216;grzip&#8217;, &#8216;lz4&#8217;
.</p></td>
    </tr>
    <tr>
      <th>options</th>
      <td><p><code><a href='https://rdrr.io/r/base/character.html'>character()</a></code> default: <code><a href='https://rdrr.io/r/base/character.html'>character(0)</a></code> Options to pass to the filter or format.
The list of available options are documented in
options can have one of the following forms:</p><ul>
<li><p><code>option=value</code>
The option/value pair will be provided to every module.
Modules that do not accept an option with this name will
ignore it.</p></li>
<li><p><code>option</code>
The option will be provided to every module with a value
of "1".</p></li>
<li><p><code>!option</code>
The option will be provided to every module with a NULL
value.</p></li>
<li><p><code>module:option=value</code>, <code>module:option</code>, <code>module:!option</code>
As above, but the corresponding option and value will be
provided only to modules whose name matches module.
See <a href='https://www.freebsd.org/cgi/man.cgi?query=archive_read_set_options&amp;sektion=3&amp;format=html'>read options</a> for available read options
See <a href='https://www.freebsd.org/cgi/man.cgi?query=archive_write_set_options&amp;sektion=3&amp;format=html'>write options</a> for available write options</p></li>
</ul></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An 'archive_write' connection to the file within the archive to be written.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If <code>format</code> and <code>filter</code> are <code>NULL</code>, they will be set automatically based on
the file extension given in <code>file</code> when writing and automatically detected
using
<a href='https://github.com/libarchive/libarchive/wiki/FormatDetection'>Robust automatic format detection</a>
when reading.</p>
<p>For traditional zip archives <code>archive_write()</code> creates a connection which
writes the data to the specified file directly. For other archive formats
the file size must be known when the archive is created, so the data is
first written to a scratch file on disk and then added to the archive. This
scratch file is automatically removed when writing is complete.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Archive format and filters can be set automatically from the file extensions.</span>
<span class='va'>f1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span>fileext <span class='op'>=</span> <span class='st'>".tar.gz"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/utils/write.table.html'>write.csv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'>archive_write</span><span class='op'>(</span><span class='va'>f1</span>, <span class='st'>"mtcars.csv"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='archive.html'>archive</a></span><span class='op'>(</span><span class='va'>f1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 3</span>
#&gt;   path        size date               
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dttm&gt;</span>             
#&gt; <span style='color: #BCBCBC;'>1</span> mtcars.csv  <span style='text-decoration: underline;'>1</span>783 2021-10-19 <span style='color: #949494;'>16:24:20</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span><span class='op'>(</span><span class='va'>f1</span><span class='op'>)</span>

<span class='co'># They can also be specified explicitly</span>
<span class='va'>f2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/write.table.html'>write.csv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'>archive_write</span><span class='op'>(</span><span class='va'>f2</span>, <span class='st'>"mtcars.csv"</span>, format <span class='op'>=</span> <span class='st'>"tar"</span>, filter <span class='op'>=</span> <span class='st'>"bzip2"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='archive.html'>archive</a></span><span class='op'>(</span><span class='va'>f2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 3</span>
#&gt;   path        size date               
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dttm&gt;</span>             
#&gt; <span style='color: #BCBCBC;'>1</span> mtcars.csv  <span style='text-decoration: underline;'>1</span>783 2021-10-19 <span style='color: #949494;'>16:24:20</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span><span class='op'>(</span><span class='va'>f2</span><span class='op'>)</span>

<span class='co'># You can also pass additional options to control things like compression level</span>
<span class='va'>f3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span>fileext <span class='op'>=</span> <span class='st'>".tar.gz"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/write.table.html'>write.csv</a></span><span class='op'>(</span><span class='va'>mtcars</span>, <span class='fu'>archive_write</span><span class='op'>(</span><span class='va'>f3</span>, <span class='st'>"mtcars.csv"</span>, options <span class='op'>=</span> <span class='st'>"compression-level=2"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='archive.html'>archive</a></span><span class='op'>(</span><span class='va'>f3</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 1 × 3</span>
#&gt;   path        size date               
#&gt;   <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dttm&gt;</span>             
#&gt; <span style='color: #BCBCBC;'>1</span> mtcars.csv  <span style='text-decoration: underline;'>1</span>783 2021-10-19 <span style='color: #949494;'>16:24:20</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span><span class='op'>(</span><span class='va'>f3</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://jimhester.com'>Jim Hester</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


